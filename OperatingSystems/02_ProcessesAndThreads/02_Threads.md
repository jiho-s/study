## Threads

### Thread Usage

- 스레드간 메모리 주소공간을 공유할 수 있다.
- 프로세스보다 가볍다
- I/O 및 컴퓨팅 작업이 많을 때 겹치게해서 속도를 높일 수 있다
- 멀티 프로세스인 경우 큰 이점이 있다

### The Classical Thread Model

프로세스는 자원을 하나로 묶어서 관리하는데 사용하고, 스레드는 CPU에서 실행되기 위해 스캐줄되는 개체이다. 즉, 스레드는 주소공간 등의 자원을 공유하며, 프로세스는 물리적 매모리, 디스크, 프린터 등의 자원을 공유한다

스레드들은 같은 주소공간을 가지며 이는 같은 전역변수를 가지는 것을 의미한다.스레드의 사용목적은 작업을 수행하기 위해 밀접하게 연관된 실행의 흐름이 자원을 공유하는데 있다.

스레드 들은 자신만의 스택을 가진다.

### Implementing Threads in User Space

커널이 스레드 정보를 알 수 없다. operating system이 스레드를 지원하지 않는 경우에 user-leveel threads를 사용할 수 있다.

각각의 프로세스는 스레드 테이블을 가지고 있어야 한다.

#### 장점

- 커널을 거쳐가는 것보다 유저레벨 스레드가 더 빠르다
- 각각의 프로세스마다 서로 다른 스케줄링 알고리즘을 사용할 수 있다.

#### 단점

- blocking sytem call을 구현하기 어렵다. 한 스레드에서 block시 모든 스레드 block
- 한 스레드가 무한 루프일 경우 프로세스가 막을 방법이 없다

### Implementing Threads in the Kernel

커널로 trapping 되기 때문에 비용이 크다

스레드의 생성 비용이 크기 때문에 재활용하는 경우도 있다

스레드 작업을 하는 시스템 콜의 비용이 크다